<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏à‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞ ‡∏á‡∏≤‡∏ô‡πÄ‡∏Å‡∏©‡∏µ‡∏¢‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡∏Ñ‡∏£‡∏π</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'kanit': ['Kanit', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Kanit', sans-serif;
        }
        
        .table-seat {
            transition: all 0.3s ease;
        }
        
        .table-seat:hover:not(.booked) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .table-seat.selected {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .file-upload-area {
            border: 2px dashed #d1d5db;
            transition: all 0.3s ease;
        }
        
        .file-upload-area:hover {
            border-color: #3b82f6;
            background-color: #f8fafc;
        }
        
        .file-upload-area.dragover {
            border-color: #10b981;
            background-color: #ecfdf5;
        }
        
        .uploaded-file {
            transition: all 0.3s ease;
        }
        
        .uploaded-file:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <div class="bg-white shadow-sm border-b border-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="text-center">
                <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-2">
                    ‡∏á‡∏≤‡∏ô‡πÄ‡∏Å‡∏©‡∏µ‡∏¢‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡∏Ñ‡∏£‡∏π
                </h1>
                <p class="text-sm sm:text-base lg:text-lg text-gray-600 font-light">
                    ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏à‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞ - ‡πÇ‡∏ï‡πä‡∏∞‡∏à‡∏µ‡∏ô 80 ‡πÇ‡∏ï‡πä‡∏∞
                </p>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 lg:py-8">
        <div class="grid grid-cols-1 xl:grid-cols-3 gap-6 lg:gap-8">
            
            <!-- Booking Form Section -->
            <div class="xl:col-span-1 space-y-6">
                <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                    <h2 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                        <span class="mr-2">üìã</span> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
                    </h2>
                    
                    <!-- Info Grid -->
                    <div class="grid grid-cols-2 gap-4 mb-6 p-4 bg-gray-50 rounded-lg">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-600">15</div>
                            <div class="text-xs text-gray-600">‡πÇ‡∏ï‡πä‡∏∞ VIP ‡∏Å‡∏•‡∏∏‡πà‡∏°<br>(15 ‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á)</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-red-600">10</div>
                            <div class="text-xs text-gray-600">‡πÇ‡∏ï‡πä‡∏∞ VIP ‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß<br>(1 ‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á)</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-gray-600">55</div>
                            <div class="text-xs text-gray-600">‡πÇ‡∏ï‡πä‡∏∞‡∏õ‡∏Å‡∏ï‡∏¥<br>(8 ‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á)</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-600" id="availableCount">80</div>
                            <div class="text-xs text-gray-600">‡πÇ‡∏ï‡πä‡∏∞‡∏ß‡πà‡∏≤‡∏á</div>
                        </div>
                    </div>
                    
                    <!-- Form -->
                    <form id="bookingForm" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á</label>
                            <input type="text" id="name" name="name" required 
                                   class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                                   placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                            <input type="tel" id="phone" name="phone" required 
                                   class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                                   placeholder="08X-XXX-XXXX">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏≠‡∏µ‡πÄ‡∏°‡∏• (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)</label>
                            <input type="email" id="email" name="email" 
                                   class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                                   placeholder="your@email.com">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô/‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
                            <input type="text" id="organization" name="organization" 
                                   class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                                   placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label>
                            <input type="number" id="amount" name="amount" required min="0" step="0.01"
                                   class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                                   placeholder="0.00">
                        </div>
                        
                        <!-- File Upload Section -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô <span class="text-red-500">*</span>
                            </label>
                            <div class="file-upload-area border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer"
                                 id="fileUploadArea">
                                <div class="flex flex-col items-center">
                                    <svg class="w-8 h-8 text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                                              d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                    </svg>
                                    <p class="text-sm text-gray-600">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏≤‡∏ß‡∏≤‡∏á</p>
                                    <p class="text-xs text-gray-500 mt-1">‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå JPG, PNG, PDF (‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 5MB)</p>
                                </div>
                                <input type="file" id="slipFile" name="slipFile" accept="image/*,.pdf" 
                                       class="hidden" required>
                            </div>
                            
                            <!-- Uploaded Files Display -->
                            <div id="uploadedFiles" class="mt-3 space-y-2"></div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                            <textarea id="notes" name="notes" rows="3" 
                                      class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                                      placeholder="‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏û‡∏¥‡πÄ‡∏®‡∏©"></textarea>
                        </div>
                        
                        <!-- Selected Tables -->
                        <div id="selectedTables" class="hidden bg-green-50 border border-green-200 rounded-lg p-4">
                            <h4 class="font-medium text-green-800 mb-2">‡πÇ‡∏ï‡πä‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</h4>
                            <div id="selectedList" class="flex flex-wrap gap-2 mb-3"></div>
                            <div class="grid grid-cols-2 gap-4 text-sm text-green-700">
                                <div>‡∏£‡∏ß‡∏°: <span id="totalTables" class="font-medium">0</span> ‡πÇ‡∏ï‡πä‡∏∞</div>
                                <div>‡∏£‡∏ß‡∏°: <span id="totalSeats" class="font-medium">0</span> ‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á</div>
                            </div>
                        </div>
                        
                        <div class="space-y-3 pt-4">
                            <button type="submit" id="submitBtn" disabled
                                    class="w-full bg-blue-600 text-white py-3 rounded-lg font-medium 
                                           disabled:bg-gray-300 disabled:cursor-not-allowed
                                           hover:bg-blue-700 transition-colors">
                                ‡∏à‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞
                            </button>
                            <button type="button" onclick="clearSelection()"
                                    class="w-full bg-gray-500 text-white py-2.5 rounded-lg font-medium 
                                           hover:bg-gray-600 transition-colors">
                                ‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Seating Chart Section -->
            <div class="xl:col-span-2">
                <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                    <h2 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                        <span class="mr-2">ü™ë</span> ‡πÅ‡∏ú‡∏ô‡∏ú‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á
                    </h2>
                    
                    <!-- Controls -->
                    <div class="flex flex-wrap gap-2 mb-4">
                        <button class="control-btn px-3 py-1.5 text-sm border border-gray-300 rounded-md 
                                       bg-blue-600 text-white border-blue-600 transition-colors"
                                onclick="filterTables('all')" data-filter="all">
                            ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                        </button>
                        <button class="control-btn px-3 py-1.5 text-sm border border-gray-300 rounded-md 
                                       bg-white text-gray-700 hover:bg-gray-50 transition-colors"
                                onclick="filterTables('available')" data-filter="available">
                            ‡∏ß‡πà‡∏≤‡∏á
                        </button>
                        <button class="control-btn px-3 py-1.5 text-sm border border-gray-300 rounded-md 
                                       bg-white text-gray-700 hover:bg-gray-50 transition-colors"
                                onclick="filterTables('vip')" data-filter="vip">
                            VIP
                        </button>
                        <button class="control-btn px-3 py-1.5 text-sm border border-gray-300 rounded-md 
                                       bg-white text-gray-700 hover:bg-gray-50 transition-colors"
                                onclick="filterTables('regular')" data-filter="regular">
                            ‡∏õ‡∏Å‡∏ï‡∏¥
                        </button>
                        <button class="control-btn px-3 py-1.5 text-sm border border-gray-300 rounded-md 
                                       bg-white text-gray-700 hover:bg-gray-50 transition-colors"
                                onclick="filterTables('booked')" data-filter="booked">
                            ‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß
                        </button>
                    </div>
                    
                    <!-- Search -->
                    <div class="mb-6">
                        <input type="text" id="searchTable" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏ï‡πä‡∏∞ (‡πÄ‡∏ä‡πà‡∏ô 1-10)" 
                               class="w-full sm:w-64 px-3 py-2 border border-gray-300 rounded-lg 
                                      focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                               onkeyup="searchTables()">
                    </div>
                    
                    <!-- Stage -->
                    <div class="w-full h-12 bg-gray-800 rounded-lg flex items-center justify-center 
                                text-white font-medium mb-8 text-sm sm:text-base">
                        üé≠ ‡πÄ‡∏ß‡∏ó‡∏µ (‡∏Å‡∏ß‡πâ‡∏≤‡∏á 8 ‡πÄ‡∏°‡∏ï‡∏£)
                    </div>
                    
                    <!-- Tables Grid -->
                    <div class="grid grid-cols-8 sm:grid-cols-10 lg:grid-cols-10 gap-2 sm:gap-3 mb-6" id="tablesGrid">
                        <!-- Tables will be generated here -->
                    </div>
                    
                    <!-- Legend -->
                    <div class="flex flex-wrap justify-center gap-4 text-sm">
                        <div class="flex items-center gap-2">
                            <div class="w-4 h-4 bg-blue-500 rounded"></div>
                            <span>VIP ‡∏Å‡∏•‡∏∏‡πà‡∏° (15 ‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á)</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-4 h-4 bg-red-500 rounded"></div>
                            <span>VIP ‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß (1 ‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á)</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-4 h-4 bg-gray-300 rounded"></div>
                            <span>‡∏õ‡∏Å‡∏ï‡∏¥ (8 ‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á)</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-4 h-4 bg-gray-500 rounded"></div>
                            <span>‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedTables = new Set();
        let bookedTables = new Set();
        let tableData = {};
        let currentFilter = 'all';
        let uploadedFiles = [];
        
        // Initialize tables data
        function initializeTables() {
            const vipGroupTables = [34, 35, 36, 37, 38, 43, 44, 45, 46, 47, 48, 53, 54, 55, 56];
            const vipSingleTables = [1, 10, 11, 20, 21, 30, 51, 60, 61, 70];
            
            for (let i = 1; i <= 80; i++) {
                let type = 'regular';
                let seats = 8;
                
                if (vipGroupTables.includes(i)) {
                    type = 'vip-group';
                    seats = 15;
                } else if (vipSingleTables.includes(i)) {
                    type = 'vip-single';
                    seats = 1;
                }
                
                tableData[i] = {
                    number: i,
                    type: type,
                    seats: seats,
                    booked: false
                };
            }
            
            // Random booked tables for demo
            const randomBooked = [5, 12, 23, 31, 42, 57, 68, 79, 15, 25];
            randomBooked.forEach(num => {
                tableData[num].booked = true;
                bookedTables.add(num);
            });
            
            updateAvailableCount();
        }
        
        // Create tables grid
        function createTablesGrid() {
            const grid = document.getElementById('tablesGrid');
            grid.innerHTML = '';
            
            for (let i = 1; i <= 80; i++) {
                const table = document.createElement('div');
                table.className = 'table-seat cursor-pointer rounded-lg flex items-center justify-center text-xs font-medium transition-all';
                table.style.aspectRatio = '1';
                table.dataset.tableNumber = i;
                table.textContent = i;
                
                const tableInfo = tableData[i];
                
                if (tableInfo.booked) {
                    table.className += ' bg-gray-500 text-white cursor-not-allowed opacity-70';
                } else if (tableInfo.type === 'vip-group') {
                    table.className += ' bg-blue-500 text-white hover:bg-blue-600';
                } else if (tableInfo.type === 'vip-single') {
                    table.className += ' bg-red-500 text-white hover:bg-red-600';
                } else {
                    table.className += ' bg-gray-300 text-gray-800 hover:bg-gray-400';
                }
                
                if (selectedTables.has(i)) {
                    table.className += ' selected ring-2 ring-green-500 ring-offset-2';
                }
                
                table.addEventListener('click', () => toggleTableSelection(i));
                grid.appendChild(table);
            }
        }
        
        // Toggle table selection
        function toggleTableSelection(tableNumber) {
            if (bookedTables.has(tableNumber)) {
                Swal.fire({
                    icon: 'warning',
                    title: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ',
                    text: '‡πÇ‡∏ï‡πä‡∏∞‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß',
                    confirmButtonColor: '#3b82f6'
                });
                return;
            }
            
            const tableElement = document.querySelector(`[data-table-number="${tableNumber}"]`);
            
            if (selectedTables.has(tableNumber)) {
                selectedTables.delete(tableNumber);
                tableElement.classList.remove('selected', 'ring-2', 'ring-green-500', 'ring-offset-2');
            } else {
                selectedTables.add(tableNumber);
                tableElement.classList.add('selected', 'ring-2', 'ring-green-500', 'ring-offset-2');
            }
            
            updateSelectedInfo();
        }
        
        // Update selected tables info
        function updateSelectedInfo() {
            const selectedTablesDiv = document.getElementById('selectedTables');
            const selectedList = document.getElementById('selectedList');
            const totalTables = document.getElementById('totalTables');
            const totalSeats = document.getElementById('totalSeats');
            const submitBtn = document.getElementById('submitBtn');
            
            if (selectedTables.size === 0) {
                selectedTablesDiv.classList.add('hidden');
                submitBtn.disabled = true;
                return;
            }
            
            selectedTablesDiv.classList.remove('hidden');
            selectedList.innerHTML = '';
            
            let totalSeatsCount = 0;
            const sortedTables = Array.from(selectedTables).sort((a, b) => a - b);
            
            sortedTables.forEach(tableNumber => {
                const tableInfo = tableData[tableNumber];
                totalSeatsCount += tableInfo.seats;
                
                const tag = document.createElement('div');
                tag.className = 'bg-green-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-2';
                tag.innerHTML = `
                    ‡πÇ‡∏ï‡πä‡∏∞ ${tableNumber} (${tableInfo.seats} ‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á)
                    <button class="hover:bg-green-600 rounded-full w-5 h-5 flex items-center justify-center text-xs" 
                            onclick="removeTable(${tableNumber})">√ó</button>
                `;
                selectedList.appendChild(tag);
            });
            
            totalTables.textContent = selectedTables.size;
            totalSeats.textContent = totalSeatsCount;
            
            // Check if file is uploaded and tables are selected
            const hasFiles = uploadedFiles.length > 0;
            submitBtn.disabled = !hasFiles;
        }
        
        // Remove table from selection
        function removeTable(tableNumber) {
            selectedTables.delete(tableNumber);
            const tableElement = document.querySelector(`[data-table-number="${tableNumber}"]`);
            tableElement.classList.remove('selected', 'ring-2', 'ring-green-500', 'ring-offset-2');
            updateSelectedInfo();
        }
        
        // Clear all selections
        function clearSelection() {
            if (selectedTables.size === 0) {
                Swal.fire({
                    icon: 'info',
                    title: '‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏ï‡πä‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å',
                    text: '‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞‡πÉ‡∏î‡πÜ',
                    confirmButtonColor: '#3b82f6'
                });
                return;
            }
            
            Swal.fire({
                title: '‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞?',
                text: "‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",
                icon: 'question',
                showCancelButton: true,
                confirmButtonColor: '#ef4444',
                cancelButtonColor: '#6b7280',
                confirmButtonText: '‡πÉ‡∏ä‡πà, ‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏•‡∏¢',
                cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
            }).then((result) => {
                if (result.isConfirmed) {
                    selectedTables.forEach(tableNumber => {
                        const tableElement = document.querySelector(`[data-table-number="${tableNumber}"]`);
                        tableElement.classList.remove('selected', 'ring-2', 'ring-green-500', 'ring-offset-2');
                    });
                    selectedTables.clear();
                    updateSelectedInfo();
                    
                    Swal.fire({
                        icon: 'success',
                        title: '‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß',
                        showConfirmButton: false,
                        timer: 1500
                    });
                }
            });
        }
        
        // Filter tables
        function filterTables(filter) {
            currentFilter = filter;
            const tables = document.querySelectorAll('.table-seat');
            const buttons = document.querySelectorAll('.control-btn');
            
            // Update active button
            buttons.forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white', 'border-blue-600');
                btn.classList.add('bg-white', 'text-gray-700');
            });
            
            const activeBtn = document.querySelector(`[data-filter="${filter}"]`);
            if (activeBtn) {
                activeBtn.classList.remove('bg-white', 'text-gray-700');
                activeBtn.classList.add('bg-blue-600', 'text-white', 'border-blue-600');
            }
            
            tables.forEach(table => {
                const tableNumber = parseInt(table.dataset.tableNumber);
                const tableInfo = tableData[tableNumber];
                let show = true;
                
                switch(filter) {
                    case 'available':
                        show = !tableInfo.booked;
                        break;
                    case 'vip':
                        show = tableInfo.type.includes('vip');
                        break;
                    case 'regular':
                        show = tableInfo.type === 'regular';
                        break;
                    case 'booked':
                        show = tableInfo.booked;
                        break;
                    default:
                        show = true;
                }
                
                table.style.display = show ? 'flex' : 'none';
            });
        }
        
        // Search tables
        function searchTables() {
            const searchTerm = document.getElementById('searchTable').value.toLowerCase();
            const tables = document.querySelectorAll('.table-seat');
            
            if (searchTerm === '') {
                filterTables(currentFilter);
                return;
            }
            
            tables.forEach(table => {
                const tableNumber = table.dataset.tableNumber;
                const show = tableNumber.includes(searchTerm);
                table.style.display = show ? 'flex' : 'none';
            });
        }
        
        // Update available count
        function updateAvailableCount() {
            const available = 80 - bookedTables.size;
            document.getElementById('availableCount').textContent = available;
        }
        
        // File upload handling
        function setupFileUpload() {
            const fileUploadArea = document.getElementById('fileUploadArea');
            const fileInput = document.getElementById('slipFile');
            const uploadedFilesDiv = document.getElementById('uploadedFiles');
            
            // Click to upload
            fileUploadArea.addEventListener('click', () => fileInput.click());
            
            // Drag and drop
            fileUploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                fileUploadArea.classList.add('dragover');
            });
            
            fileUploadArea.addEventListener('dragleave', () => {
                fileUploadArea.classList.remove('dragover');
            });
            
            fileUploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                fileUploadArea.classList.remove('dragover');
                const files = e.dataTransfer.files;
                handleFiles(files);
            });
            
            // File input change
            fileInput.addEventListener('change', (e) => {
                handleFiles(e.target.files);
            });
            
            function handleFiles(files) {
                Array.from(files).forEach(file => {
                    if (validateFile(file)) {
                        uploadedFiles.push(file);
                        displayUploadedFile(file);
                        updateSelectedInfo(); // Update submit button state
                    }
                });
            }
            
            function validateFile(file) {
                const maxSize = 5 * 1024 * 1024; // 5MB
                const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'application/pdf'];
                
                if (file.size > maxSize) {
                    Swal.fire({
                        icon: 'error',
                        title: '‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ',
                        text: '‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 5MB',
                        confirmButtonColor: '#3b82f6'
                    });
                    return false;
                }
                
                if (!allowedTypes.includes(file.type)) {
                    Swal.fire({
                        icon: 'error',
                        title: '‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á',
                        text: '‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÑ‡∏ü‡∏•‡πå JPG, PNG, PDF ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô',
                        confirmButtonColor: '#3b82f6'
                    });
                    return false;
                }
                
                return true;
            }
            
            function displayUploadedFile(file) {
                const fileDiv = document.createElement('div');
                fileDiv.className = 'uploaded-file bg-gray-50 border border-gray-200 rounded-lg p-3 flex items-center justify-between';
                
                const fileInfo = document.createElement('div');
                fileInfo.className = 'flex items-center gap-3';
                
                const fileIcon = document.createElement('div');
                fileIcon.className = 'text-2xl';
                fileIcon.innerHTML = file.type.includes('pdf') ? 'üìÑ' : 'üñºÔ∏è';
                
                const fileDetails = document.createElement('div');
                fileDetails.innerHTML = `
                    <div class="text-sm font-medium text-gray-900">${file.name}</div>
                    <div class="text-xs text-gray-500">${(file.size / 1024 / 1024).toFixed(2)} MB</div>
                `;
                
                fileInfo.appendChild(fileIcon);
                fileInfo.appendChild(fileDetails);
                
                const removeBtn = document.createElement('button');
                removeBtn.className = 'text-red-500 hover:text-red-700 p-1 rounded hover:bg-red-50 transition-colors';
                removeBtn.innerHTML = 'üóëÔ∏è';
                removeBtn.onclick = () => {
                    uploadedFiles = uploadedFiles.filter(f => f !== file);
                    fileDiv.remove();
                    updateSelectedInfo();
                    
                    if (uploadedFiles.length === 0) {
                        fileInput.required = true;
                    }
                };
                
                fileDiv.appendChild(fileInfo);
                fileDiv.appendChild(removeBtn);
                uploadedFilesDiv.appendChild(fileDiv);
                
                // Remove required attribute when file is uploaded
                fileInput.required = false;
            }
        }
        
        // Form submission
        document.getElementById('bookingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (selectedTables.size === 0) {
                Swal.fire({
                    icon: 'warning',
                    title: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞',
                    text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡πÇ‡∏ï‡πä‡∏∞',
                    confirmButtonColor: '#3b82f6'
                });
                return;
            }
            
            if (uploadedFiles.length === 0) {
                Swal.fire({
                    icon: 'warning',
                    title: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ',
                    text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô',
                    confirmButtonColor: '#3b82f6'
                });
                return;
            }
            
            const formData = new FormData(this);
            const name = formData.get('name');
            const phone = formData.get('phone');
            const email = formData.get('email');
            const organization = formData.get('organization');
            const amount = formData.get('amount');
            const notes = formData.get('notes');
            
            // Show loading
            Swal.fire({
                title: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞...',
                html: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì',
                allowOutsideClick: false,
                allowEscapeKey: false,
                didOpen: () => {
                    Swal.showLoading();
                }
            });
            
            // Simulate processing time
            setTimeout(() => {
                // Book selected tables
                selectedTables.forEach(tableNumber => {
                    bookedTables.add(tableNumber);
                    tableData[tableNumber].booked = true;
                    
                    const tableElement = document.querySelector(`[data-table-number="${tableNumber}"]`);
                    tableElement.className = 'table-seat cursor-not-allowed rounded-lg flex items-center justify-center text-xs font-medium transition-all bg-gray-500 text-white opacity-70';
                });
                
                // Calculate summary
                let totalSeats = 0;
                const tablesSummary = Array.from(selectedTables).sort((a, b) => a - b).map(num => {
                    const seats = tableData[num].seats;
                    totalSeats += seats;
                    return `‡πÇ‡∏ï‡πä‡∏∞ ${num} (${seats} ‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á)`;
                });
                
                // Show success message
                Swal.fire({
                    icon: 'success',
                    title: '‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',
                    html: `
                        <div class="text-left space-y-2 mt-4">
                            <p><strong>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á:</strong> ${name}</p>
                            <p><strong>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</strong> ${phone}</p>
                            ${email ? `<p><strong>‡∏≠‡∏µ‡πÄ‡∏°‡∏•:</strong> ${email}</p>` : ''}
                            ${organization ? `<p><strong>‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:</strong> ${organization}</p>` : ''}
                            <p><strong>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô:</strong> ${parseFloat(amount).toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
                            <p><strong>‡πÇ‡∏ï‡πä‡∏∞‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á:</strong> ${tablesSummary.join(', ')}</p>
                            <p><strong>‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á:</strong> ${totalSeats} ‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á</p>
                            <p><strong>‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö:</strong> ${uploadedFiles.length} ‡πÑ‡∏ü‡∏•‡πå</p>
                            ${notes ? `<p><strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</strong> ${notes}</p>` : ''}
                        </div>
                    `,
                    confirmButtonColor: '#10b981',
                    confirmButtonText: '‡∏ï‡∏Å‡∏•‡∏á',
                    allowOutsideClick: false
                });
                
                // Reset form
                document.getElementById('bookingForm').reset();
                selectedTables.clear();
                uploadedFiles = [];
                document.getElementById('uploadedFiles').innerHTML = '';
                document.getElementById('slipFile').required = true;
                updateSelectedInfo();
                updateAvailableCount();
                
            }, 2000);
        });
        
        // Initialize everything
        initializeTables();
        createTablesGrid();
        setupFileUpload();
        
        // Phone number formatting
        document.getElementById('phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 10) value = value.slice(0, 10);
            
            if (value.length >= 6) {
                value = value.replace(/(\d{3})(\d{3})(\d{4})/, '$1-$2-$3');
            } else if (value.length >= 3) {
                value = value.replace(/(\d{3})(\d+)/, '$1-$2');
            }
            
            e.target.value = value;
        });
        
        // Amount formatting
        document.getElementById('amount').addEventListener('input', function(e) {
            let value = e.target.value.replace(/[^0-9.]/g, '');
            const parts = value.split('.');
            if (parts.length > 2) {
                value = parts[0] + '.' + parts.slice(1).join('');
            }
            if (parts[1] && parts[1].length > 2) {
                value = parts[0] + '.' + parts[1].slice(0, 2);
            }
            e.target.value = value;
        });
        
        // Responsive table grid adjustment
        function adjustTableGrid() {
            const grid = document.getElementById('tablesGrid');
            const containerWidth = grid.parentElement.offsetWidth;
            
            if (containerWidth < 640) {
                grid.className = 'grid grid-cols-8 gap-2 mb-6';
            } else if (containerWidth < 1024) {
                grid.className = 'grid grid-cols-10 gap-2 mb-6';
            } else {
                grid.className = 'grid grid-cols-10 gap-3 mb-6';
            }
        }
        
        // Adjust on window resize
        window.addEventListener('resize', adjustTableGrid);
        window.addEventListener('load', adjustTableGrid);
        
        // Touch events for mobile
        if ('ontouchstart' in window) {
            document.addEventListener('touchstart', function() {
                // Add touch support
            });
        }
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                const submitBtn = document.getElementById('submitBtn');
                if (!submitBtn.disabled) {
                    submitBtn.click();
                }
            }
            
            if (e.key === 'Escape') {
                const searchInput = document.getElementById('searchTable');
                if (searchInput.value) {
                    searchInput.value = '';
                    searchTables();
                }
            }
        });
        
        // Auto-save form data to session storage (optional)
        const formElements = ['name', 'phone', 'email', 'organization', 'amount', 'notes'];
        
        // Save form data
        function saveFormData() {
            const formData = {};
            formElements.forEach(id => {
                const element = document.getElementById(id);
                if (element && element.value) {
                    formData[id] = element.value;
                }
            });
            // Note: localStorage is not available in Claude artifacts
            // This would work in a real implementation
        }
        
        // Load form data
        function loadFormData() {
            // Note: localStorage is not available in Claude artifacts
            // This would work in a real implementation
        }
        
        // Save form data on input
        formElements.forEach(id => {
            const element = document.getElementById(id);
            if (element) {
                element.addEventListener('input', saveFormData);
            }
        });
        
        // Accessibility improvements
        document.querySelectorAll('.table-seat').forEach(table => {
            table.setAttribute('tabindex', '0');
            table.setAttribute('role', 'button');
            table.setAttribute('aria-label', `‡πÇ‡∏ï‡πä‡∏∞ ${table.textContent}`);
            
            table.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    this.click();
                }
            });
        });
        
        // Update aria labels for selected tables
        function updateAriaLabels() {
            document.querySelectorAll('.table-seat').forEach(table => {
                const tableNumber = parseInt(table.dataset.tableNumber);
                const tableInfo = tableData[tableNumber];
                const isSelected = selectedTables.has(tableNumber);
                const isBooked = tableInfo.booked;
                
                let label = `‡πÇ‡∏ï‡πä‡∏∞ ${tableNumber}`;
                if (tableInfo.type === 'vip-group') {
                    label += ' VIP ‡∏Å‡∏•‡∏∏‡πà‡∏° 15 ‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á';
                } else if (tableInfo.type === 'vip-single') {
                    label += ' VIP ‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß 1 ‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á';
                } else {
                    label += ' ‡∏õ‡∏Å‡∏ï‡∏¥ 8 ‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á';
                }
                
                if (isBooked) {
                    label += ' ‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß';
                } else if (isSelected) {
                    label += ' ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß';
                } else {
                    label += ' ‡∏ß‡πà‡∏≤‡∏á';
                }
                
                table.setAttribute('aria-label', label);
            });
        }
        
        // Call updateAriaLabels when tables change
        const originalUpdateSelectedInfo = updateSelectedInfo;
        updateSelectedInfo = function() {
            originalUpdateSelectedInfo();
            updateAriaLabels();
        };
        
        // Initial aria labels update
        updateAriaLabels();
        
        // Add loading state to buttons
        function setButtonLoading(button, loading) {
            if (loading) {
                button.disabled = true;
                button.innerHTML = '<span class="animate-spin">‚è≥</span> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...';
            } else {
                button.disabled = false;
                button.innerHTML = button.dataset.originalText || '‡∏à‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞';
            }
        }
        
        // Store original button text
        document.getElementById('submitBtn').dataset.originalText = '‡∏à‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞';
        
        console.log('üéâ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô!');
        console.log('üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÇ‡∏ï‡πä‡∏∞:', {
            '‡πÇ‡∏ï‡πä‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î': 80,
            '‡πÇ‡∏ï‡πä‡∏∞ VIP ‡∏Å‡∏•‡∏∏‡πà‡∏°': 15,
            '‡πÇ‡∏ï‡πä‡∏∞ VIP ‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß': 10,
            '‡πÇ‡∏ï‡πä‡∏∞‡∏õ‡∏Å‡∏ï‡∏¥': 55,
            '‡πÇ‡∏ï‡πä‡∏∞‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß': bookedTables.size,
            '‡πÇ‡∏ï‡πä‡∏∞‡∏ß‡πà‡∏≤‡∏á': 80 - bookedTables.size
        });
    </script>
</body>
</html>
